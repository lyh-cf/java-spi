# java-spi
## SPI简介
SPI（Service Provider Interface）服务提供接口是 Java 的机制，主要用于实现模块化开发和插件化扩展。

SPI 机制允许服务提供者通过特定的配置文件将自己的实现注册到系统中，然后系统通过反射机制动态加载这些实现，而不需要修改原始框架的代码，从而实现了系统的解耦、提高了可扩展性。

一个典型的 SPI 应用场景是 JDBC（Java 数据库连接库），不同的数据库驱动程序开发者可以使用 JDBC 库，然后定制自己的数据库驱动程序。

此外，我们使用的主流 Java 开发框架中，几乎都使用到了 SPI 机制，比如 Servlet 容器、日志框架、ORM 框架、Spring 框架。

本项目是利用java的spi机制实现的一个小案例：用户（服务调用者）使用空调遥控器（定义接口）尝试打开空调（服务提供者，需要实现空调遥控器的接口）

## 核心思想
 * 面向接口编程，不直接使用实现类，为某个接口寻找服务的机制，类似IOC思想，将装配的控制权交给ServiceLoader。
 * 只提供服务接口，具体服务由其他组件实现，接口和具体实现分离（类似桥接），同时能够通过系统的ServiceLoader拿到这些实现类的集合，统一处理，这样在组件化中往往会带来很多便利，SPI机制可以实现不同模块之间方便的面向接口编程，拒绝了硬编码的方式，解耦效果很好。

## 注意事项
**服务提供者：**  
 * 需要实现服务调用者发布的接口  
 * 在META-INF/services目录下，创建一个接口全限定名的文件，内容是接口的实现类的全限定名  
 * 实现类必须要有一个无参构造器，因为服务调用者是通过ServiceLoader.load来动态加载发现服务的，其迭代底层是用S p = service.cast(c.newInstance());来创建实例的

## 核心代码
![image](https://github.com/lyh-cf/java-spi/assets/107308317/d54f067a-f715-4fcd-8970-8bf70b408082)
